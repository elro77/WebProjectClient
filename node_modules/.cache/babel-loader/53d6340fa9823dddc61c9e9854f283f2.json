{"ast":null,"code":"import axios from 'axios';\nimport { SetUser } from '../components/Navigator';\nconst baseUrl = 'http://localhost:3001';\nexport let data = {\n  username: \"\",\n  password: \"\",\n  lists: \"[]\"\n};\nexport function signIn(username, password, onSuccess, onFailure) {\n  data = {\n    username: \"\",\n    password: \"\",\n    lists: \"[]\"\n  };\n  const request = axios.get(`${baseUrl}/api/login/:${username}/:${password}`, {\n    crossdomain: true\n  });\n  return request.then(response => {\n    console.log(response.data);\n\n    if (response.data == null) {\n      onFailure();\n      SetUser({\n        name: \"guest\",\n        isLog: false\n      });\n    } else {\n      console.log(\"after getting user projects:\");\n      console.log(response.data); // console.log(response.data.userName)\n      // console.log(response.data.userProjectsJSON)\n\n      onSuccess(response.data.userName, response.data.userProjectsJSON);\n      SetUser({\n        name: username,\n        isLog: true\n      });\n    }\n  }).catch(error => console.log(error));\n}\nexport function register(username, password, onSuccess, onFailure) {\n  const request = axios.post(`${baseUrl}/api/register/:${username}/:${password}`, {\n    crossdomain: true\n  });\n  return request.then(response => {\n    console.log(response.data);\n\n    if (response.data == null) {\n      onFailure();\n    } else {\n      SetUser({\n        name: username,\n        isLog: true\n      });\n      onSuccess(username);\n    }\n  }).catch(error => console.log(error));\n}\nexport function addProject(userName, projectName, projectDesc, projectsList, onSuccess, onFailure) {\n  console.log(\"serverCom addProjectToDB\"); //const request = axios.post(`${baseUrl}/api/register/:${username}/:${password}`,  { crossdomain: true })\n\n  const request = axios.post(`${baseUrl}/api/addProject/:${userName}/:${projectName}/:${projectDesc}/:${projectsList}`, {\n    crossdomain: true\n  });\n  return request.then(response => {\n    console.log(response.data);\n\n    if (response.data == null) {\n      onFailure();\n    } else {\n      console.log(response.data);\n      onSuccess(response.data);\n    }\n  }).catch(error => console.log(error));\n}\nexport function addMember(userName, projectName, premission, id, onSuccess, onFailure) {\n  console.log(\"serverCom addMemberToDB\"); //const request = axios.post(`${baseUrl}/api/register/:${username}/:${password}`,  { crossdomain: true })\n\n  const request = axios.post(`${baseUrl}/api/addMember/:${userName}/:${projectName}/:${premission}/:${id}`, {\n    crossdomain: true\n  });\n  return request.then(response => {\n    console.log(\"sc addMember\");\n    console.log(response.data);\n\n    if (response.data == null) {\n      onFailure(\"There was an error while adding member\");\n    } else {\n      if (response.data.passed === false) {\n        onFailure(response.data.msg);\n      } else {\n        onSuccess(userName, premission, response.data.msg);\n      }\n    }\n  }).catch(error => console.log(error));\n}\nexport function addIssue(projectID, issueID, desc, dueDate, assignedBy, assignedTo, status, onSuccess, onFailure) {\n  console.log(\"serverCom addIssue\"); //const request = axios.post(`${baseUrl}/api/register/:${username}/:${password}`,  { crossdomain: true })\n\n  const request = axios.post(`${baseUrl}/api/addIssue/:${projectID}/:${issueID}/:${desc}/:${dueDate}/:${assignedBy}/:${assignedTo}/:${status}`, {\n    crossdomain: true\n  });\n  return request.then(response => {\n    console.log(\"sc addIssue\");\n    console.log(response.data);\n\n    if (response.data == null) {\n      onFailure(\"There was an error while adding member\");\n    } else {\n      if (response.data.passed === false) {\n        onFailure(response.data.msg);\n      } else {\n        onSuccess(response.data);\n      }\n    }\n  }).catch(error => console.log(error));\n}\nexport function updateIssueStatus(projectID, issueID, finalStatus, onSuccess, onFailure) {\n  console.log(\"serverCom updateIssue\"); //const request = axios.post(`${baseUrl}/api/register/:${username}/:${password}`,  { crossdomain: true })\n\n  const request = axios.post(`${baseUrl}/api/updateIssueStatus/:${projectID}/:${issueID}/:${finalStatus}`, {\n    crossdomain: true\n  });\n  return request.then(response => {\n    console.log(\"sc addIssue\");\n    console.log(response.data);\n\n    if (response.data == null) {\n      onFailure(\"There was an error while updating issue status\");\n    } else {\n      if (response.data.passed === false) {\n        onFailure(response.data.msg);\n      } else {\n        onSuccess(response.data);\n      }\n    }\n  }).catch(error => console.log(error));\n}\nexport function update(user, onSuccess, onFailure) {\n  console.log(\"update\");\n  const request = axios.put(`${baseUrl}/api/update/user`, JSON.stringify(user), {\n    headers: {\n      // Overwrite Axios's automatically set Content-Type\n      'Content-Type': 'application/json'\n    }\n  });\n  return request.then(response => {\n    console.log(response.data);\n\n    if (response.data == null) {\n      onFailure();\n    } else {\n      onSuccess();\n    }\n  }).catch(error => console.log(error));\n}","map":{"version":3,"names":["axios","SetUser","baseUrl","data","username","password","lists","signIn","onSuccess","onFailure","request","get","crossdomain","then","response","console","log","name","isLog","userName","userProjectsJSON","catch","error","register","post","addProject","projectName","projectDesc","projectsList","addMember","premission","id","passed","msg","addIssue","projectID","issueID","desc","dueDate","assignedBy","assignedTo","status","updateIssueStatus","finalStatus","update","user","put","JSON","stringify","headers"],"sources":["C:/Users/Elroye/Documents/WebProjectClient/src/services/serverCom.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nimport {SetUser} from '../components/Navigator'; \r\n\r\nconst baseUrl = 'http://localhost:3001'\r\nexport let data={username:\"\",password:\"\",lists:\"[]\"}\r\nexport function signIn(username,password,onSuccess,onFailure) {\r\n    data={username:\"\",password:\"\",lists:\"[]\"}\r\n    const request = axios.get(`${baseUrl}/api/login/:${username}/:${password}`,  { crossdomain: true })\r\n        return request.then((response) => {\r\n        console.log(response.data)\r\n        if (response.data==null)\r\n        {\r\n            onFailure()\r\n            SetUser({name:\"guest\",isLog:false})\r\n        }\r\n        else\r\n        {\r\n          console.log(\"after getting user projects:\")\r\n          console.log(response.data)\r\n          // console.log(response.data.userName)\r\n          // console.log(response.data.userProjectsJSON)\r\n          \r\n\r\n\r\n          onSuccess(response.data.userName, response.data.userProjectsJSON)\r\n\r\n          SetUser({name:username,isLog:true})\r\n          \r\n           \r\n        }\r\n        \r\n        \r\n\r\n    }).catch(error => console.log(error))\r\n  }\r\n\r\n\r\n  export function register(username,password,onSuccess,onFailure) {\r\n    const request = axios.post(`${baseUrl}/api/register/:${username}/:${password}`,  { crossdomain: true })\r\n    return request.then((response) => {\r\n        console.log(response.data)\r\n        if (response.data==null)\r\n        {\r\n            onFailure()\r\n        }\r\n        else\r\n        {\r\n            SetUser({name:username,isLog:true})\r\n            onSuccess(username)\r\n        }\r\n    }).catch(error => console.log(error))\r\n  \r\n    }\r\n\r\n\r\n    export function addProject(userName,projectName,projectDesc,projectsList,onSuccess,onFailure) {\r\n      console.log(\"serverCom addProjectToDB\") \r\n      //const request = axios.post(`${baseUrl}/api/register/:${username}/:${password}`,  { crossdomain: true })\r\n      const request = axios.post(`${baseUrl}/api/addProject/:${userName}/:${projectName}/:${projectDesc}/:${projectsList}`,  { crossdomain: true })\r\n      return request.then((response) => {\r\n          console.log(response.data)\r\n          if (response.data==null)\r\n          {\r\n            onFailure()\r\n          }\r\n          else\r\n          {\r\n            console.log(response.data)\r\n            onSuccess(response.data)\r\n          }\r\n      }).catch(error => console.log(error))\r\n    \r\n      }\r\n\r\n      export function addMember(userName,projectName,premission,id,onSuccess,onFailure) {\r\n        console.log(\"serverCom addMemberToDB\") \r\n        //const request = axios.post(`${baseUrl}/api/register/:${username}/:${password}`,  { crossdomain: true })\r\n        const request = axios.post(`${baseUrl}/api/addMember/:${userName}/:${projectName}/:${premission}/:${id}`,  { crossdomain: true })\r\n        return request.then((response) => {\r\n            console.log(\"sc addMember\")\r\n            console.log(response.data)\r\n            if (response.data==null)\r\n            {\r\n              onFailure(\"There was an error while adding member\")\r\n            }\r\n            else\r\n            {\r\n              if(response.data.passed === false)\r\n              {\r\n                onFailure(response.data.msg)\r\n              }\r\n              else\r\n              {\r\n                onSuccess(userName, premission, response.data.msg)\r\n              }\r\n             \r\n            }\r\n        }).catch(error => console.log(error))\r\n      \r\n        }\r\n\r\n        export function addIssue(projectID,issueID,desc,dueDate,assignedBy,assignedTo,status,onSuccess,onFailure) {\r\n          console.log(\"serverCom addIssue\") \r\n          //const request = axios.post(`${baseUrl}/api/register/:${username}/:${password}`,  { crossdomain: true })\r\n          const request = axios.post(`${baseUrl}/api/addIssue/:${projectID}/:${issueID}/:${desc}/:${dueDate}/:${assignedBy}/:${assignedTo}/:${status}`,  { crossdomain: true })\r\n          return request.then((response) => {\r\n              console.log(\"sc addIssue\")\r\n              console.log(response.data)\r\n              if (response.data==null)\r\n              {\r\n                onFailure(\"There was an error while adding member\")\r\n              }\r\n              else\r\n              {\r\n                if(response.data.passed === false)\r\n                {\r\n                  onFailure(response.data.msg)\r\n                }\r\n                else\r\n                {\r\n                  onSuccess(response.data)\r\n                }\r\n               \r\n              }\r\n          }).catch(error => console.log(error))\r\n        \r\n          }\r\n\r\n          export function updateIssueStatus(projectID, issueID, finalStatus, onSuccess, onFailure) {\r\n            console.log(\"serverCom updateIssue\") \r\n            //const request = axios.post(`${baseUrl}/api/register/:${username}/:${password}`,  { crossdomain: true })\r\n            const request = axios.post(`${baseUrl}/api/updateIssueStatus/:${projectID}/:${issueID}/:${finalStatus}`,  { crossdomain: true })\r\n            return request.then((response) => {\r\n                console.log(\"sc addIssue\")\r\n                console.log(response.data)\r\n                if (response.data==null)\r\n                {\r\n                  onFailure(\"There was an error while updating issue status\")\r\n                }\r\n                else\r\n                {\r\n                  if(response.data.passed === false)\r\n                  {\r\n                    onFailure(response.data.msg)\r\n                  }\r\n                  else\r\n                  {\r\n                    onSuccess(response.data)\r\n                  }\r\n                 \r\n                }\r\n            }).catch(error => console.log(error))\r\n          \r\n            }\r\n\r\n\r\n      \r\n\r\n\r\n  \r\n\r\n\r\n    export function update(user,onSuccess,onFailure) {\r\n        console.log(\"update\")\r\n        const request = axios.put(`${baseUrl}/api/update/user`,JSON.stringify(user),\r\n        {headers: {\r\n          // Overwrite Axios's automatically set Content-Type\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n        return request.then((response) => {\r\n            console.log(response.data)\r\n            if (response.data==null)\r\n            {\r\n                onFailure()\r\n            }\r\n            else\r\n            {\r\n                onSuccess()\r\n            }\r\n        }).catch(error => console.log(error))\r\n      }\r\n\r\n\r\n    \r\n\r\n\r\n\r\n      \r\n  \r\n\r\n\r\n\r\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAAQC,OAAR,QAAsB,yBAAtB;AAEA,MAAMC,OAAO,GAAG,uBAAhB;AACA,OAAO,IAAIC,IAAI,GAAC;EAACC,QAAQ,EAAC,EAAV;EAAaC,QAAQ,EAAC,EAAtB;EAAyBC,KAAK,EAAC;AAA/B,CAAT;AACP,OAAO,SAASC,MAAT,CAAgBH,QAAhB,EAAyBC,QAAzB,EAAkCG,SAAlC,EAA4CC,SAA5C,EAAuD;EAC1DN,IAAI,GAAC;IAACC,QAAQ,EAAC,EAAV;IAAaC,QAAQ,EAAC,EAAtB;IAAyBC,KAAK,EAAC;EAA/B,CAAL;EACA,MAAMI,OAAO,GAAGV,KAAK,CAACW,GAAN,CAAW,GAAET,OAAQ,eAAcE,QAAS,KAAIC,QAAS,EAAzD,EAA6D;IAAEO,WAAW,EAAE;EAAf,CAA7D,CAAhB;EACI,OAAOF,OAAO,CAACG,IAAR,CAAcC,QAAD,IAAc;IAClCC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACX,IAArB;;IACA,IAAIW,QAAQ,CAACX,IAAT,IAAe,IAAnB,EACA;MACIM,SAAS;MACTR,OAAO,CAAC;QAACgB,IAAI,EAAC,OAAN;QAAcC,KAAK,EAAC;MAApB,CAAD,CAAP;IACH,CAJD,MAMA;MACEH,OAAO,CAACC,GAAR,CAAY,8BAAZ;MACAD,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACX,IAArB,EAFF,CAGE;MACA;;MAIAK,SAAS,CAACM,QAAQ,CAACX,IAAT,CAAcgB,QAAf,EAAyBL,QAAQ,CAACX,IAAT,CAAciB,gBAAvC,CAAT;MAEAnB,OAAO,CAAC;QAACgB,IAAI,EAACb,QAAN;QAAec,KAAK,EAAC;MAArB,CAAD,CAAP;IAGD;EAIJ,CAzBU,EAyBRG,KAzBQ,CAyBFC,KAAK,IAAIP,OAAO,CAACC,GAAR,CAAYM,KAAZ,CAzBP,CAAP;AA0BL;AAGD,OAAO,SAASC,QAAT,CAAkBnB,QAAlB,EAA2BC,QAA3B,EAAoCG,SAApC,EAA8CC,SAA9C,EAAyD;EAC9D,MAAMC,OAAO,GAAGV,KAAK,CAACwB,IAAN,CAAY,GAAEtB,OAAQ,kBAAiBE,QAAS,KAAIC,QAAS,EAA7D,EAAiE;IAAEO,WAAW,EAAE;EAAf,CAAjE,CAAhB;EACA,OAAOF,OAAO,CAACG,IAAR,CAAcC,QAAD,IAAc;IAC9BC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACX,IAArB;;IACA,IAAIW,QAAQ,CAACX,IAAT,IAAe,IAAnB,EACA;MACIM,SAAS;IACZ,CAHD,MAKA;MACIR,OAAO,CAAC;QAACgB,IAAI,EAACb,QAAN;QAAec,KAAK,EAAC;MAArB,CAAD,CAAP;MACAV,SAAS,CAACJ,QAAD,CAAT;IACH;EACJ,CAXM,EAWJiB,KAXI,CAWEC,KAAK,IAAIP,OAAO,CAACC,GAAR,CAAYM,KAAZ,CAXX,CAAP;AAaC;AAGD,OAAO,SAASG,UAAT,CAAoBN,QAApB,EAA6BO,WAA7B,EAAyCC,WAAzC,EAAqDC,YAArD,EAAkEpB,SAAlE,EAA4EC,SAA5E,EAAuF;EAC5FM,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAD4F,CAE5F;;EACA,MAAMN,OAAO,GAAGV,KAAK,CAACwB,IAAN,CAAY,GAAEtB,OAAQ,oBAAmBiB,QAAS,KAAIO,WAAY,KAAIC,WAAY,KAAIC,YAAa,EAAnG,EAAuG;IAAEhB,WAAW,EAAE;EAAf,CAAvG,CAAhB;EACA,OAAOF,OAAO,CAACG,IAAR,CAAcC,QAAD,IAAc;IAC9BC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACX,IAArB;;IACA,IAAIW,QAAQ,CAACX,IAAT,IAAe,IAAnB,EACA;MACEM,SAAS;IACV,CAHD,MAKA;MACEM,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACX,IAArB;MACAK,SAAS,CAACM,QAAQ,CAACX,IAAV,CAAT;IACD;EACJ,CAXM,EAWJkB,KAXI,CAWEC,KAAK,IAAIP,OAAO,CAACC,GAAR,CAAYM,KAAZ,CAXX,CAAP;AAaC;AAED,OAAO,SAASO,SAAT,CAAmBV,QAAnB,EAA4BO,WAA5B,EAAwCI,UAAxC,EAAmDC,EAAnD,EAAsDvB,SAAtD,EAAgEC,SAAhE,EAA2E;EAChFM,OAAO,CAACC,GAAR,CAAY,yBAAZ,EADgF,CAEhF;;EACA,MAAMN,OAAO,GAAGV,KAAK,CAACwB,IAAN,CAAY,GAAEtB,OAAQ,mBAAkBiB,QAAS,KAAIO,WAAY,KAAII,UAAW,KAAIC,EAAG,EAAvF,EAA2F;IAAEnB,WAAW,EAAE;EAAf,CAA3F,CAAhB;EACA,OAAOF,OAAO,CAACG,IAAR,CAAcC,QAAD,IAAc;IAC9BC,OAAO,CAACC,GAAR,CAAY,cAAZ;IACAD,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACX,IAArB;;IACA,IAAIW,QAAQ,CAACX,IAAT,IAAe,IAAnB,EACA;MACEM,SAAS,CAAC,wCAAD,CAAT;IACD,CAHD,MAKA;MACE,IAAGK,QAAQ,CAACX,IAAT,CAAc6B,MAAd,KAAyB,KAA5B,EACA;QACEvB,SAAS,CAACK,QAAQ,CAACX,IAAT,CAAc8B,GAAf,CAAT;MACD,CAHD,MAKA;QACEzB,SAAS,CAACW,QAAD,EAAWW,UAAX,EAAuBhB,QAAQ,CAACX,IAAT,CAAc8B,GAArC,CAAT;MACD;IAEF;EACJ,CAnBM,EAmBJZ,KAnBI,CAmBEC,KAAK,IAAIP,OAAO,CAACC,GAAR,CAAYM,KAAZ,CAnBX,CAAP;AAqBC;AAED,OAAO,SAASY,QAAT,CAAkBC,SAAlB,EAA4BC,OAA5B,EAAoCC,IAApC,EAAyCC,OAAzC,EAAiDC,UAAjD,EAA4DC,UAA5D,EAAuEC,MAAvE,EAA8EjC,SAA9E,EAAwFC,SAAxF,EAAmG;EACxGM,OAAO,CAACC,GAAR,CAAY,oBAAZ,EADwG,CAExG;;EACA,MAAMN,OAAO,GAAGV,KAAK,CAACwB,IAAN,CAAY,GAAEtB,OAAQ,kBAAiBiC,SAAU,KAAIC,OAAQ,KAAIC,IAAK,KAAIC,OAAQ,KAAIC,UAAW,KAAIC,UAAW,KAAIC,MAAO,EAA3H,EAA+H;IAAE7B,WAAW,EAAE;EAAf,CAA/H,CAAhB;EACA,OAAOF,OAAO,CAACG,IAAR,CAAcC,QAAD,IAAc;IAC9BC,OAAO,CAACC,GAAR,CAAY,aAAZ;IACAD,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACX,IAArB;;IACA,IAAIW,QAAQ,CAACX,IAAT,IAAe,IAAnB,EACA;MACEM,SAAS,CAAC,wCAAD,CAAT;IACD,CAHD,MAKA;MACE,IAAGK,QAAQ,CAACX,IAAT,CAAc6B,MAAd,KAAyB,KAA5B,EACA;QACEvB,SAAS,CAACK,QAAQ,CAACX,IAAT,CAAc8B,GAAf,CAAT;MACD,CAHD,MAKA;QACEzB,SAAS,CAACM,QAAQ,CAACX,IAAV,CAAT;MACD;IAEF;EACJ,CAnBM,EAmBJkB,KAnBI,CAmBEC,KAAK,IAAIP,OAAO,CAACC,GAAR,CAAYM,KAAZ,CAnBX,CAAP;AAqBC;AAED,OAAO,SAASoB,iBAAT,CAA2BP,SAA3B,EAAsCC,OAAtC,EAA+CO,WAA/C,EAA4DnC,SAA5D,EAAuEC,SAAvE,EAAkF;EACvFM,OAAO,CAACC,GAAR,CAAY,uBAAZ,EADuF,CAEvF;;EACA,MAAMN,OAAO,GAAGV,KAAK,CAACwB,IAAN,CAAY,GAAEtB,OAAQ,2BAA0BiC,SAAU,KAAIC,OAAQ,KAAIO,WAAY,EAAtF,EAA0F;IAAE/B,WAAW,EAAE;EAAf,CAA1F,CAAhB;EACA,OAAOF,OAAO,CAACG,IAAR,CAAcC,QAAD,IAAc;IAC9BC,OAAO,CAACC,GAAR,CAAY,aAAZ;IACAD,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACX,IAArB;;IACA,IAAIW,QAAQ,CAACX,IAAT,IAAe,IAAnB,EACA;MACEM,SAAS,CAAC,gDAAD,CAAT;IACD,CAHD,MAKA;MACE,IAAGK,QAAQ,CAACX,IAAT,CAAc6B,MAAd,KAAyB,KAA5B,EACA;QACEvB,SAAS,CAACK,QAAQ,CAACX,IAAT,CAAc8B,GAAf,CAAT;MACD,CAHD,MAKA;QACEzB,SAAS,CAACM,QAAQ,CAACX,IAAV,CAAT;MACD;IAEF;EACJ,CAnBM,EAmBJkB,KAnBI,CAmBEC,KAAK,IAAIP,OAAO,CAACC,GAAR,CAAYM,KAAZ,CAnBX,CAAP;AAqBC;AAST,OAAO,SAASsB,MAAT,CAAgBC,IAAhB,EAAqBrC,SAArB,EAA+BC,SAA/B,EAA0C;EAC7CM,OAAO,CAACC,GAAR,CAAY,QAAZ;EACA,MAAMN,OAAO,GAAGV,KAAK,CAAC8C,GAAN,CAAW,GAAE5C,OAAQ,kBAArB,EAAuC6C,IAAI,CAACC,SAAL,CAAeH,IAAf,CAAvC,EAChB;IAACI,OAAO,EAAE;MACR;MACA,gBAAgB;IAFR;EAAV,CADgB,CAAhB;EAMA,OAAOvC,OAAO,CAACG,IAAR,CAAcC,QAAD,IAAc;IAC9BC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACX,IAArB;;IACA,IAAIW,QAAQ,CAACX,IAAT,IAAe,IAAnB,EACA;MACIM,SAAS;IACZ,CAHD,MAKA;MACID,SAAS;IACZ;EACJ,CAVM,EAUJa,KAVI,CAUEC,KAAK,IAAIP,OAAO,CAACC,GAAR,CAAYM,KAAZ,CAVX,CAAP;AAWD"},"metadata":{},"sourceType":"module"}